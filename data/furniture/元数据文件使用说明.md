# 家具元数据文件使用说明

## 文件位置
`data/furniture/furniture_metadata.json`

## 文件结构

元数据文件采用JSON格式，包含以下主要部分：

### 1. furniture 数组
包含所有家具的详细信息，每个家具对象包含以下字段：

```json
{
  "filename": "sofa_1.jpg",           // 文件名（必须与data/furniture目录中的文件一致）
  "display_name": "现代风格沙发1",     // 显示名称
  "type": "sofa",                      // 家具类型（sofa, table, chair等）
  "style": "modern",                   // 风格（modern, nordic, european, chinese, industrial, minimalist）
  "length": 2.0,                       // 长度（米）
  "width": 0.9,                        // 宽度（米）
  "height": 0.85,                      // 高度（米，可选）
  "description": "现代简约风格三人沙发，适合中小型客厅"  // 描述（可选）
}
```

### 2. styles 对象
定义所有支持的风格类型及其描述：

```json
{
  "modern": {
    "name": "现代风格",
    "description": "现代简约，线条流畅"
  },
  "nordic": {
    "name": "北欧风格",
    "description": "简洁自然，舒适温馨"
  }
  // ... 其他风格
}
```

## 添加新家具

### 步骤1：添加图片文件
将家具图片文件放入 `data/furniture/` 目录

### 步骤2：添加元数据
在 `furniture_metadata.json` 文件的 `furniture` 数组中添加新条目：

```json
{
  "filename": "sofa_new.jpg",
  "display_name": "新沙发名称",
  "type": "sofa",
  "style": "modern",
  "length": 2.1,
  "width": 0.95,
  "height": 0.88,
  "description": "沙发描述"
}
```

### 示例：添加一个中式风格沙发

1. 将图片文件 `sofa_chinese_1.jpg` 放入 `data/furniture/` 目录

2. 在 `furniture_metadata.json` 中添加：

```json
{
  "filename": "sofa_chinese_1.jpg",
  "display_name": "中式经典沙发",
  "type": "sofa",
  "style": "chinese",
  "length": 2.0,
  "width": 0.9,
  "height": 0.85,
  "description": "中式传统风格沙发，典雅大气"
}
```

## 支持的风格类型

- `modern` - 现代风格
- `nordic` - 北欧风格
- `european` - 欧式风格
- `chinese` - 中式风格
- `industrial` - 工业风格
- `minimalist` - 简约风格

## 尺寸说明

- **单位**：所有尺寸使用"米"（m）作为单位
- **length**：长度（前后方向，通常是最长边）
- **width**：宽度（左右方向）
- **height**：高度（上下方向，可选）

## 过滤逻辑

系统会根据以下条件过滤家具：

1. **风格过滤**：只显示与选择风格匹配的家具
2. **尺寸过滤**：
   - 如果提供了房间尺寸，家具的长度和宽度都应该小于房间对应尺寸的80%
   - 如果家具没有尺寸信息，会被保留（让用户自己判断）

## 注意事项

1. **文件名必须匹配**：`filename` 字段必须与 `data/furniture/` 目录中的实际文件名完全一致
2. **JSON格式**：确保JSON格式正确，可以使用在线JSON验证工具检查
3. **编码**：文件使用UTF-8编码，支持中文
4. **向后兼容**：如果某个家具没有在元数据文件中，系统会尝试从文件名解析风格信息

## 批量添加

如果需要批量添加多个家具，可以：

1. 准备一个包含所有家具信息的CSV或Excel文件
2. 编写脚本将数据转换为JSON格式
3. 合并到 `furniture_metadata.json` 文件中

## 验证

添加元数据后，可以通过以下方式验证：

1. 重启应用
2. 访问 `/furniture` 接口查看返回的家具列表
3. 检查日志文件 `project_log/project.log` 查看是否有错误信息
